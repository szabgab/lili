<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes">
    <title>German for English speakers</title>
    <style>
        .odd {
            background-color: #EEEEEE;
        }
        .even {
            background-color: #FFFFFF;
        }
        .warning {
            background-color: #FF5555;
        }
    </style>
  </head>
  <body>
    <nav>
      <a href="index.html">home</a>
      |
      <a href="modules.html">modules</a>
      |
      <a href="target.html">German</a>
      |
      <a href="source.html">English</a>
    </nav>


    <h1>German for English speakers</h1>
    <div><a href="https://github.com/kantord/LibreLingo/tree/main/courses/german-from-english">Repository</a></div>
    <div>License: CC BY 4.0: <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div>
    <div>Total number of words: 177</div>
    <div>Number of phrases: 58</div>

    <div>
    <a href="target.html">words in German</a>
    </div>
    <div>
    <a href="modules.html">modules</a>
    </div>


<hr>

<style>
#input-text {
    width: 50%;
    height: 100px;
}
.missing {
    background-color: #FF6666;
}
.middle {
    width: 30px;
}
</style>
<div>
<textarea id="input-text">
</textarea>
</div>
<div>
<button id="translate">Translate</button>
</div>
<div id="output">
<div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
$(document).ready(function(){
    var source_to_target = null;
    var target_to_source = null;
    var course_data = null;

    var translate = function() {
        const original = $("#input-text").val();
        const cleaned = original.replace(/"';,!?/g, " ");
        const words = cleaned.split(" ");
        var html = "<table>";
        html += '<tr>';
        html += '<th>' + course_data['target_language_name']  + '</th><th>' + course_data['source_language_name'] + '</th>'
        html += '<th class="middle"></th>';
        html += '<th>' + course_data['source_language_name']  + '</th><th>' + course_data['target_language_name'] + '</th>'
        html += '</tr>';
        for (var ix = 0; ix < words.length; ix++) {
            if (words[ix] == "") {
                continue;
            }
            var word = words[ix].toLowerCase()

            html += '<tr>';
            var translation = target_to_source[word];
            if (translation) {
                html += '<td><a href="target/' + word + '.html">' + words[ix] + '</a></td><td>' + translation + '</td>';
            } else {
                html += '<td class="missing">' + words[ix] + '</td><td class="missing">' + '</td>';
            }
            html += '<td class="middle"></td>';

            var translation = source_to_target[word];
            if (translation) {
                html += '<td><a href="source/' + word + '.html">' + words[ix] + '</a></td><td>' + translation + '</td>';
            } else {
                html += '<td class="missing">' + words[ix] + '</td><td class="missing">' + '</td>';
            }

            html += '</tr>';
        }
        html += "</table>";

        $("#output").html(html);
    };
    $.getJSON("stats.json", function(data){
        course_data = data;
    }).fail(function(){
        console.log("An error has occurred.");
    });

    $.getJSON("source-to-target.json", function(data){
        source_to_target = data;
    }).fail(function(){
        console.log("An error has occurred.");
    });

    $.getJSON("target-to-source.json", function(data){
        target_to_source = data;
    }).fail(function(){
        console.log("An error has occurred.");
    });

    $('#input-text').bind('input propertychange', translate)
    $("#translate").click(translate);
});
</script>



  </body>
</html>